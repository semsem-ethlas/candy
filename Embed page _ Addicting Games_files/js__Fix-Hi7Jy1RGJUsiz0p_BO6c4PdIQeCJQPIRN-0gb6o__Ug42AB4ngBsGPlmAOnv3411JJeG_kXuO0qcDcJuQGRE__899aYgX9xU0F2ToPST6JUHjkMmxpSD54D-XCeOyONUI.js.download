var RESIZE_TIMER,gameContainer=document.getElementById('embed-game-wrapper'),addPx=function(value){return value+'px'},gameDisplayMethods={displayGame:function(){var gameEl=gameContainer.querySelector('*');this.loadContentSource(gameConfig);this.resizeGame(gameContainer,gameEl,gameConfig)},loadContentSource:function(config){if(config.type==='html5_game_url'){var objElem=gameDisplayMethods.createObjectElement(config.source);document.getElementById('markup_iframe').appendChild(objElem)}else if(config.type==='markup'){document.getElementById('markup_iframe').innerHTML=config.source}else if(config.type==='flash_file'){var flashObj=document.getElementById('gameObject'),flashEmbed=document.getElementById('gameEmbed');flashObj.style.display='block';flashObj.insertAdjacentHTML('beforeend','<param name="movie" value="'+config.source+'">');flashEmbed.setAttribute('src',config.source)}},createObjectElement:function(source){var elem=document.createElement('object');elem.setAttribute('data',source);elem.setAttribute('id','game-content-frame');return elem},caculateResize:function(srcWidth,srcHeight,maxWidth,maxHeight){var ratio=Math.min(maxWidth/srcWidth,maxHeight/srcHeight);return{width:srcWidth*ratio,height:srcHeight*ratio}},getOrientation:function(){if(window.matchMedia&&window.matchMedia(DEVICE_QUERY).matches){if(window.matchMedia&&window.matchMedia(LANDSCAPE_QUERY).matches){return'landscape'}else if(window.matchMedia&&window.matchMedia(PORTRAIT_QUERY).matches){return'portrait'}else return null}else return null},resizeGame:function(wrapper,game,config){var self=this,orientation=self.getOrientation(),rotate=false;if(!game.dataset.resize){console.log('no resize');return};if((window.matchMedia&&window.matchMedia(DEVICE_QUERY).matches&&!rotate)||(!window.matchMedia||!window.matchMedia(DEVICE_QUERY).matches)){var gameSize={width:wrapper.offsetWidth,height:wrapper.offsetHeight};if(config.width&&config.height)gameSize=self.caculateResize(config.width,config.height,wrapper.offsetWidth,wrapper.offsetHeight);if(game.style.width!==addPx(gameSize.width)||game.style.height!==addPx(gameSize.height)){game.style.width=addPx(gameSize.width);game.style.height=addPx(gameSize.height)}}},resizeHandler:function(){var gameEl=gameContainer.querySelector('*');gameDisplayMethods.resizeGame(gameContainer,gameEl,gameConfig)}};document.onreadystatechange=function(){gameDisplayMethods.displayGame()};;(function($){Drupal.behaviors.showPassword={attach:function(context){var showPassword=function(uniqId){return $('<div class="password-toggle-wrapper"><input type="checkbox" id="password-toggle-'+uniqId+'"/><label for="password-toggle-'+uniqId+'" class="password-toggle"></label></div>')};$(":password").each(function(){var $this=$(this);showPassword(Math.random()).insertAfter($this,context)});$(':checkbox',showPassword).click(function(){var orig;if($(this).is(':checked')){orig=$(this).parent().parent().find(":password").attr("type","text")}else orig=$(this).parent().parent().find(":text").attr("type","password")})}}})(jQuery);;